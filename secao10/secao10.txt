Seção 10: Executando testes em paralelo


Paralelismo

É uma maneira de otimizar os testes a nível de execução.

Atualmente os testes estão sendo executados de um a forma serializada e ao final do último teste temos o tempo total gasto nos testes.

2ª opção: executar 2 testes ou mais de cada vez, tendo um tempo de execução menor.

Quanto mais processos em paralelo for possível executar, menor será o tempo de execução, mesmo que a duração de cada teste será diferente.



Configurando o Maven




Plugin do Maven.

https://adrianoaquino.wordpress.com/2009/11/02/configurando-maven-no-linux-ubuntu/

https://dicasdejava.com.br/como-instalar-o-maven-no-windows/


Execução em paralelo

http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html

http://maven.apache.org/surefire/maven-surefire-plugin/


 <build>
	 <testSourceDirectory>src</testSourceDirectory>
	 <plugins>
	 <plugin>
	 <groupId>org.apache.maven.plugins</groupId>
	 <artifactId>maven-surefire-plugin</artifactId>
	 <version>2.22.2</version>
	 <configuration>
	 <includes>
	 <include>br/ce/wcaquino/suites/*.java</include>
	 </includes>
	 <parallel>all</parallel>
	 <threadCount>2</threadCount>
	 </configuration>
	 </plugin>
	 </plugins>
 </build>

Um driver por thread

Resolvendo o erro do driver, usando a ThreadLocal.




Gerenciamento de massa de dados, parte 2

Mudando a estratégia de massa de dados.

Preparando o banco com todas as massas de dados necessárias, não dependendo de nenhum teste par executar outro.

Fazer um particionamento lógico dos dados, para que uma massa de dados não interfira na outra.



Easter Egg

Definir uma suíte de testes e as massas, e depois criar uma script que seja executado antes, limpando os dados e inserindo os dados necessários.

Botão escondido: reset, reseta o banco de dados, apagando movimentações e contas do usuário logado.






Adaptando os testes para a nova estratégia

Resetando a massa de dados

Reinicializando a massa de dados automaticamente ao fim dos testes.



Selenium GRID

https://www.selenium.dev/documentation/grid/

Refatorando testes para usar o GRID

Preparando ambiente GRID: Windows

Preparando ambiente GRID: Linux

Preparando ambiente GRID: OSX

Execução remota dos testes
